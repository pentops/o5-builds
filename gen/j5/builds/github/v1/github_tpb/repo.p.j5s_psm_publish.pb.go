// Code generated by protoc-gen-go-psm. DO NOT EDIT.

package github_tpb

import (
	context "context"
	psm "github.com/pentops/j5/lib/psm"
	github_pb "github.com/pentops/o5-builds/gen/j5/builds/github/v1/github_pb"
)

// Publish Toipc for j5.builds.github.v1.Repo
func PublishRepo() psm.GeneralEventHook[
	*github_pb.RepoKeys,    // implements psm.IKeyset
	*github_pb.RepoState,   // implements psm.IState
	github_pb.RepoStatus,   // implements psm.IStatusEnum
	*github_pb.RepoData,    // implements psm.IStateData
	*github_pb.RepoEvent,   // implements psm.IEvent
	github_pb.RepoPSMEvent, // implements psm.IInnerEvent
] {
	return github_pb.RepoPSMEventPublishHook(func(
		ctx context.Context,
		publisher psm.Publisher,
		state *github_pb.RepoState,
		event *github_pb.RepoEvent,
	) error {
		publisher.Publish(&RepoEventMessage{
			Metadata: event.EventPublishMetadata(),
			Keys:     event.Keys,
			Event:    event.Event,
			Data:     state.Data,
			Status:   state.Status,
		})
		return nil
	})
}
